import{_ as s,c as e,o as a,aA as t}from"./chunks/framework.DSiJSBhI.js";const k=JSON.parse('{"title":"SINDBAD Metrics","description":"","frontmatter":{},"headers":[],"relativePath":"pages/develop/cost_metrics.md","filePath":"pages/develop/cost_metrics.md","lastUpdated":null}'),n={name:"pages/develop/cost_metrics.md"};function l(r,i,p,o,h,c){return a(),e("div",null,[...i[0]||(i[0]=[t(`<h1 id="SINDBAD-Metrics" tabindex="-1">SINDBAD Metrics <a class="header-anchor" href="#SINDBAD-Metrics" aria-label="Permalink to &quot;SINDBAD Metrics {#SINDBAD-Metrics}&quot;">​</a></h1><p>This document provides comprehensive documentation for the metrics used to evaluate and optimize SINDBAD models.</p><h2 id="Overview" tabindex="-1">Overview <a class="header-anchor" href="#Overview" aria-label="Permalink to &quot;Overview {#Overview}&quot;">​</a></h2><p>The SINDBAD metrics are implemented in the <code>SindbadMetrics</code> library package located in the <code>lib</code> directory. The metrics system is designed to be modular and extensible, allowing users to define custom metrics for specific use cases while maintaining compatibility with SINDBAD&#39;s optimization and evaluation workflows.</p><h2 id="Available-Metrics" tabindex="-1">Available Metrics <a class="header-anchor" href="#Available-Metrics" aria-label="Permalink to &quot;Available Metrics {#Available-Metrics}&quot;">​</a></h2><p>To view the list of available metrics:</p><div class="tip custom-block"><p class="custom-block-title">To list all available cost metrics and their purposes, use:</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Sindbad</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Simulation</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">showMethodsOf</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(PerfMetric)</span></span></code></pre></div><p>This will display a formatted list of all cost metrics and their descriptions, including:</p><ul><li><p>The metric&#39;s purpose</p></li><li><p>Required parameters</p></li><li><p>Return values</p></li><li><p>Any special considerations</p></li></ul></div><p>The following metrics are currently supported:</p><h3 id="Error-based-Metrics" tabindex="-1">Error-based Metrics <a class="header-anchor" href="#Error-based-Metrics" aria-label="Permalink to &quot;Error-based Metrics {#Error-based-Metrics}&quot;">​</a></h3><ul><li><p><code>MSE</code>: Mean squared error - Measures the average squared difference between predicted and observed values</p></li><li><p><code>NAME1R</code>: Normalized Absolute Mean Error with 1/R scaling - Measures the absolute difference between means normalized by the range of observations</p></li><li><p><code>NMAE1R</code>: Normalized Mean Absolute Error with 1/R scaling - Measures the average absolute error normalized by the range of observations</p></li></ul><h3 id="Nash-Sutcliffe-Efficiency-Metrics" tabindex="-1">Nash-Sutcliffe Efficiency Metrics <a class="header-anchor" href="#Nash-Sutcliffe-Efficiency-Metrics" aria-label="Permalink to &quot;Nash-Sutcliffe Efficiency Metrics {#Nash-Sutcliffe-Efficiency-Metrics}&quot;">​</a></h3><ul><li><p><code>NSE</code>: Nash-Sutcliffe Efficiency - Measures model performance relative to the mean of observations</p></li><li><p><code>NSEInv</code>: Inverse Nash-Sutcliffe Efficiency - Inverse of NSE for minimization problems</p></li><li><p><code>NSEσ</code>: Nash-Sutcliffe Efficiency with uncertainty - Incorporates observation uncertainty in the performance measure</p></li><li><p><code>NSEσInv</code>: Inverse Nash-Sutcliffe Efficiency with uncertainty - Inverse of NSEσ for minimization problems</p></li><li><p><code>NNSE</code>: Normalized Nash-Sutcliffe Efficiency - Measures model performance relative to the mean of observations, normalized to [0,1] range</p></li><li><p><code>NNSEInv</code>: Inverse Normalized Nash-Sutcliffe Efficiency - Inverse of NNSE for minimization problems, normalized to [0,1] range</p></li><li><p><code>NNSEσ</code>: Normalized Nash-Sutcliffe Efficiency with uncertainty - Incorporates observation uncertainty in the normalized performance measure</p></li><li><p><code>NNSEσInv</code>: Inverse Normalized Nash-Sutcliffe Efficiency with uncertainty - Inverse of NNSEσ for minimization problems</p></li></ul><h3 id="Correlation-based-Metrics" tabindex="-1">Correlation-based Metrics <a class="header-anchor" href="#Correlation-based-Metrics" aria-label="Permalink to &quot;Correlation-based Metrics {#Correlation-based-Metrics}&quot;">​</a></h3><ul><li><p><code>Pcor</code>: Pearson Correlation - Measures linear correlation between predictions and observations</p></li><li><p><code>PcorInv</code>: Inverse Pearson Correlation - Inverse of Pcor for minimization problems</p></li><li><p><code>Pcor2</code>: Squared Pearson Correlation - Measures the strength of linear relationship between predictions and observations</p></li><li><p><code>Pcor2Inv</code>: Inverse Squared Pearson Correlation - Inverse of Pcor2 for minimization problems</p></li><li><p><code>NPcor</code>: Normalized Pearson Correlation - Measures linear correlation between predictions and observations, normalized to [0,1] range</p></li><li><p><code>NPcorInv</code>: Inverse Normalized Pearson Correlation - Inverse of NPcor for minimization problems</p></li></ul><h3 id="Rank-Correlation-Metrics" tabindex="-1">Rank Correlation Metrics <a class="header-anchor" href="#Rank-Correlation-Metrics" aria-label="Permalink to &quot;Rank Correlation Metrics {#Rank-Correlation-Metrics}&quot;">​</a></h3><ul><li><p><code>Scor</code>: Spearman Correlation - Measures monotonic relationship between predictions and observations</p></li><li><p><code>ScorInv</code>: Inverse Spearman Correlation - Inverse of Scor for minimization problems</p></li><li><p><code>Scor2</code>: Squared Spearman Correlation - Measures the strength of monotonic relationship between predictions and observations</p></li><li><p><code>Scor2Inv</code>: Inverse Squared Spearman Correlation - Inverse of Scor2 for minimization problems</p></li><li><p><code>NScor</code>: Normalized Spearman Correlation - Measures monotonic relationship between predictions and observations, normalized to [0,1] range</p></li><li><p><code>NScorInv</code>: Inverse Normalized Spearman Correlation - Inverse of NScor for minimization problems</p></li></ul><h2 id="Adding-a-New-Metric" tabindex="-1">Adding a New Metric <a class="header-anchor" href="#Adding-a-New-Metric" aria-label="Permalink to &quot;Adding a New Metric {#Adding-a-New-Metric}&quot;">​</a></h2><h3 id="1.-Define-the-Metric-Type" tabindex="-1">1. Define the Metric Type <a class="header-anchor" href="#1.-Define-the-Metric-Type" aria-label="Permalink to &quot;1. Define the Metric Type {#1.-Define-the-Metric-Type}&quot;">​</a></h3><p>Create a new metric type in <code>lib/SindbadMetrics/src/metricTypes.jl</code>:</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NewMetric</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">struct</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> NewMetric </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> PerfMetric</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> end</span></span></code></pre></div><p>Requirements:</p><ul><li><p>Use PascalCase for the type name</p></li><li><p>Make it a subtype of <code>PerfMetric</code></p></li><li><p>Export the type</p></li><li><p>Add a purpose function describing the metric&#39;s role</p></li></ul><h3 id="2.-Implement-the-Metric-Function" tabindex="-1">2. Implement the Metric Function <a class="header-anchor" href="#2.-Implement-the-Metric-Function" aria-label="Permalink to &quot;2. Implement the Metric Function {#2.-Implement-the-Metric-Function}&quot;">​</a></h3><p>Implement the metric calculation in <code>lib/SindbadMetrics/src/metrics.jl</code>:</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> metric</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">NewMetric</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, ŷ</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, y</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, yσ</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">AbstractArray</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # Your metric calculation here</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> metric_value</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">end</span></span></code></pre></div><p>Requirements:</p><ul><li><p>Function must be named <code>metric</code></p></li><li><p>Must take four arguments:</p><ul><li><p><code>ŷ</code>: Model simulation data/estimate</p></li><li><p><code>y</code>: Observation data</p></li><li><p><code>yσ</code>: Observational uncertainty data</p></li><li><p>The metric type</p></li></ul></li><li><p>Must return a scalar value</p></li></ul><h3 id="3.-Using-the-New-Metric" tabindex="-1">3. Using the New Metric <a class="header-anchor" href="#3.-Using-the-New-Metric" aria-label="Permalink to &quot;3. Using the New Metric {#3.-Using-the-New-Metric}&quot;">​</a></h3><p>To use your new metric in an experiment:</p><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cost_options </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    variable </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> :your_variable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    cost_metric </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> NewMetric</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">    # other options...</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><h3 id="4.-Testing" tabindex="-1">4. Testing <a class="header-anchor" href="#4.-Testing" aria-label="Permalink to &quot;4. Testing {#4.-Testing}&quot;">​</a></h3><p>Test your new metric by:</p><ul><li><p>Running it on sample data</p></li><li><p>Comparing results with existing metrics</p></li><li><p>Verifying it works in the optimization process</p></li></ul><h2 id="Metric-Implementation-Details" tabindex="-1">Metric Implementation Details <a class="header-anchor" href="#Metric-Implementation-Details" aria-label="Permalink to &quot;Metric Implementation Details {#Metric-Implementation-Details}&quot;">​</a></h2><h3 id="Data-Handling" tabindex="-1">Data Handling <a class="header-anchor" href="#Data-Handling" aria-label="Permalink to &quot;Data Handling {#Data-Handling}&quot;">​</a></h3><p>The metrics system includes several helper functions for data handling:</p><ul><li><p><code>getDataWithoutNaN</code>: Returns model and observation data excluding NaN values</p></li><li><p><code>aggregateData</code>: Aggregates data based on specified order (TimeSpace or SpaceTime)</p></li><li><p><code>applySpatialWeight</code>: Applies area weights to the data</p></li><li><p><code>getHarmonizedData</code>: Harmonizes model and observation data for comparison</p></li></ul><h3 id="Metric-Combination" tabindex="-1">Metric Combination <a class="header-anchor" href="#Metric-Combination" aria-label="Permalink to &quot;Metric Combination {#Metric-Combination}&quot;">​</a></h3><p>Metrics can be combined using various methods:</p><ul><li><p><code>MetricSum</code>: Returns the total sum as the metric</p></li><li><p><code>MetricMinimum</code>: Returns the minimum value as the metric</p></li><li><p><code>MetricMaximum</code>: Returns the maximum value as the metric</p></li><li><p><code>percentile_value</code>: Returns the specified percentile as the metric</p></li></ul><h2 id="Examples" tabindex="-1">Examples <a class="header-anchor" href="#Examples" aria-label="Permalink to &quot;Examples {#Examples}&quot;">​</a></h2><h3 id="Calculating-a-Simple-Metric" tabindex="-1">Calculating a Simple Metric <a class="header-anchor" href="#Calculating-a-Simple-Metric" aria-label="Permalink to &quot;Calculating a Simple Metric {#Calculating-a-Simple-Metric}&quot;">​</a></h3><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">using</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> SindbadTEM</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">.</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Metrics</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Define observations and model output</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">y </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3.0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># observations</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">yσ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">0.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># uncertainties</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">ŷ </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">2.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3.1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]  </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># model output</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Calculate MSE</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">mse </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> metric</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MSE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), ŷ, y, yσ)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Calculate correlation</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">correlation </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> metric</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Pcor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(), ŷ, y, yσ)</span></span></code></pre></div><h3 id="Using-Multiple-Metrics-in-ParameterOptimization" tabindex="-1">Using Multiple Metrics in ParameterOptimization <a class="header-anchor" href="#Using-Multiple-Metrics-in-ParameterOptimization" aria-label="Permalink to &quot;Using Multiple Metrics in ParameterOptimization {#Using-Multiple-Metrics-in-ParameterOptimization}&quot;">​</a></h3><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Define cost options for multiple variables</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cost_options </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> [</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        variable </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> :variable1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        cost_metric </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> MSE</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        cost_weight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 1.0</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    (</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        variable </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> :variable2</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        cost_metric </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> Pcor</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        cost_weight </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0.5</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    )</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># Calculate combined metric</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">cost_vector </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> metricVector</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(model_output, observations, cost_options)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">combined_metric </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> combineMetric</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(cost_vector, </span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">MetricSum</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">())</span></span></code></pre></div><h2 id="Best-Practices" tabindex="-1">Best Practices <a class="header-anchor" href="#Best-Practices" aria-label="Permalink to &quot;Best Practices {#Best-Practices}&quot;">​</a></h2><ol><li><strong>Documentation</strong></li></ol><ul><li><p>Add clear documentation for your new metric</p></li><li><p>Include mathematical formulas if applicable</p></li><li><p>Provide usage examples</p></li></ul><ol start="2"><li><strong>Testing</strong></li></ol><ul><li><p>Test with various data types and sizes</p></li><li><p>Verify edge cases (e.g., NaN values)</p></li><li><p>Compare with existing metrics</p></li></ul><ol start="3"><li><strong>Performance</strong></li></ol><ul><li><p>Optimize for large datasets</p></li><li><p>Consider memory usage</p></li><li><p>Handle missing values appropriately</p></li></ul><ol start="4"><li><strong>Compatibility</strong></li></ol><ul><li><p>Ensure compatibility with existing workflows</p></li><li><p>Follow the established interface</p></li><li><p>Maintain consistent error handling</p></li></ul><h2 id="Defining-Purpose-for-Metric-Types" tabindex="-1">Defining Purpose for Metric Types <a class="header-anchor" href="#Defining-Purpose-for-Metric-Types" aria-label="Permalink to &quot;Defining Purpose for Metric Types {#Defining-Purpose-for-Metric-Types}&quot;">​</a></h2><p>Each metric type in SINDBAD should have a <code>purpose</code> function that describes its role in the framework. This helps with documentation and provides clear information about what each metric does.</p><h3 id="How-to-Define-Purpose" tabindex="-1">How to Define Purpose <a class="header-anchor" href="#How-to-Define-Purpose" aria-label="Permalink to &quot;How to Define Purpose {#How-to-Define-Purpose}&quot;">​</a></h3><ol><li>Make sure that the base <code>purpose</code> function from UtilsKit is already imported:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> UtilsKit</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> purpose</span></span></code></pre></div><ol><li>Then, <code>purpose</code> can be easily extended for your metric type:</li></ol><div class="language-julia vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">julia</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># For a concrete metric type</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">purpose</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">::</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">Type{MyMetric}</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;Description of what MyMetric does&quot;</span></span></code></pre></div><h3 id="Best-Practices-2" tabindex="-1">Best Practices <a class="header-anchor" href="#Best-Practices-2" aria-label="Permalink to &quot;Best Practices {#Best-Practices-2}&quot;">​</a></h3><ul><li><p>Keep descriptions concise but informative</p></li><li><p>Focus on what the metric measures and how it&#39;s calculated</p></li><li><p>Include any normalization or scaling factors in the description</p></li><li><p>For abstract types, clearly indicate their role in the type hierarchy</p></li></ul>`,63)])])}const u=s(n,[["render",l]]);export{k as __pageData,u as default};
